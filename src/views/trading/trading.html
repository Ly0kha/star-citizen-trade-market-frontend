<v-layout align-space-between justify-start column>
	<h1 class="display-1">Trading</h1>
	<v-card>
		<v-form ref="filterForm">
			<v-container>
				<v-layout row wrap>
					<v-flex xs12 md6>
						<v-autocomplete
							v-model="startLocation"
							:items="locations"
							return-object
							item-text="name"
							label="Start Location"
							prepend-icon="fas fa-plane-departure"
							clearable
						>
						</v-autocomplete>
					</v-flex>
					<v-flex xs12 md6>
						<v-autocomplete
							v-model="endLocation"
							:items="locations"
							return-object
							item-text="name"
							label="End Location"
							prepend-icon="fas fa-plane-arrival"
							clearable
						></v-autocomplete>
					</v-flex>
					<v-flex xs12 md3>
						<v-text-field type="number" min="1" v-model.number="maxScu" label="Max SCU"></v-text-field>
					</v-flex>
					<v-flex xs12 md3>
						<v-text-field
							type="number"
							min="1"
							v-model.number="startCurrency"
							label="Start aUEC"
						></v-text-field>
					</v-flex>
					<v-flex xs12 md12>
						<v-layout row>
							<v-btn color="primary" @click="search()">Search</v-btn>
							<v-spacer></v-spacer>
							<v-btn @click="reportPricesModal = true" color="accent">Report Prices</v-btn>
							<report-price
								:open="reportPricesModal"
								:location="startLocation"
								@close="reportPricesModalClosed()"
							></report-price>
							<v-menu offset-y>
								<v-btn slot="activator" color="secondary">Miss Something?</v-btn>
								<v-list>
									<v-list-tile @click="">
										<v-list-tile-title>Add new Location</v-list-tile-title>
									</v-list-tile>
									<v-list-tile @click="createCommodityModal = true">
										<v-list-tile-title>Add new Commodity</v-list-tile-title>
									</v-list-tile>
									<v-list-tile @click="">
										<v-list-tile-title>Add new Game Version</v-list-tile-title>
									</v-list-tile>
								</v-list>
							</v-menu>
							<create-commodity
								:open="createCommodityModal"
								@close="createCommodityModalClosed()"
							></create-commodity>
						</v-layout>
					</v-flex>
				</v-layout>
			</v-container>
		</v-form>
	</v-card>
	<v-data-table :headers="headers" :items="trades" :pagination.sync="pagination" class="elevation-1">
		<template slot="items" slot-scope="props">
			<td>{{ props.item.item.name }}</td>
			<td>{{ props.item.startLocation.name }}</td>
			<td>{{ props.item.endLocation.name }}</td>
			<td class="text-md-right">{{ props.item.buyItemPrice.unitPrice.toFixed(2) }}</td>
			<td class="text-md-right">{{ props.item.sellItemPrice.unitPrice.toFixed(2) }}</td>
			<td class="text-md-right">{{ props.item.profit.toFixed(2) }}</td>
			<td class="text-md-right">{{ props.item.margin.toFixed(2) }} %</td>
			<td>{{ props.item.scanTime | moment('LLL') }}</td>
			<td class="mono">{{ props.item.scannedInGameVersion.identifier }}</td>
		</template>
	</v-data-table>
</v-layout>
